<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <meta charset="UTF-8"></meta>
        <meta charset="UTF-8"></meta>
        <meta name="viewport" content="width=device-width, user-scalable=no"></meta>
        <meta name="description" content="Gestión de servcios veterinarios"></meta>
        <meta name="keywords" content="Mascota, Veterinario, PetShop, Clínica, Peluquería, Baño"></meta>
        <meta name="author" content="Julian Bermudez, Leonardo Fandiño"></meta>
	<!-- InstanceBeginEditable name="doctitle" -->
	<title>Now Vet | Agendar cita de peluquería</title>
	<!-- InstanceEndEditable -->
        <link rel="stylesheet" type="text/css" href="../../css/estilos.css"></link>
        <link rel="icon" href="../../imagenes/favicon.ico" type="image/x-icon"></link>
        <link rel="stylesheet" type="text/css" href="../../css/font-awesome.css"></link>
        <link rel="stylesheet" type="text/css" href="../../css/bootstrap.css"></link>
        <link rel="stylesheet" type="text/css" href="../../css/jquery.datetimepicker.css"></link>
	<script src="../../js/jquery-1.11.3.min.js"></script>
	<script src="../../js/bootstrap.js"></script>
	<!-- InstanceBeginEditable name="head" -->
        <link rel="stylesheet" type="text/css" href="css/formValidation.css"></link>
        <script src="../../js/jquery.datetimepicker.full.js"></script>
        <script src="../../js/formValidation.min.js"></script>
        <script src="../../js/bootstrapValidator.js"></script>
        <script src="../../js/es_ES.js"></script>
        <script>
    	$().ready(function () {
                $('#fecha').change(function(){
			$('#formularioDeSolicitudDeCitasDePeluqueria').formValidation('revalidateField', 'fecha');
		});
		$('#fecha').blur(function(){
			$('#formularioDeSolicitudDeCitasDePeluqueria').formValidation('revalidateField', 'fecha');
		});
        	$('#formularioDeSolicitudDeCitasDePeluqueria').formValidation({
            	err: {container: 'tooltip'},
                icon: {valid: 'fa fa-check-circle', invalid: 'fa fa-times-circle', validating: 'fa fa-refresh'},
                locale: 'es_ES',
                fields: {
                	nombre: {
                    	row: '.form-group',
                        validators: {
                        	notEmpty: {},
                            regexp: {
                            	regexp: /[A-ZÑ Á,É,Í,Ó,Ú a-zñ á,é,í,ó,ú]+$/,
                                message: 'De 3 a 30 letras sin carácteres especiales'
                            },
                            stringLength: {
                            	min: 3,
                                max: 30
                            }
                        }
                	},
					mascota: {
						row: '.form-group',
                        message: 'Debe seleccionar una mascota'
					},
					fecha: {
                    	row: '.form-group',
                     	message: 'Debe seleccionar una fecha'
                	},
					hora: {
                    	row: '.form-group',
                     	message: 'Debe seleccionar una hora'
                	}
     		  	}
            });
         });
     </script>
    </h:head>
    <h:body>
        <img id="back" src="../../imagenes/fondo.jpg" height="751px" width="765px"></img>
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="../indexCliente.xhtml">
        <img alt="Brand" src="../../imagenes/logo.png" width="132px" height="90px" />
      </a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="../indexCliente.xhtml">Inicio</a></li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Servicios <span class="caret"></span></a>
          <ul class="dropdown-menu">
              <li><a href="formularioCitasClinicas.xhtml">Agendar Cita Clínica</a></li>
              <li><a href="formularioCitasDePeluqueria.xhtml">Agendar Cita De Peluquería</a></li>
          </ul>
        </li>
        <li><a href="../citas/misCitas.xhtml">Citas</a></li>
        <li><a href="../miPerfil.html">Mi Perfil</a></li>
        <li><a href="../../index.xhtml">Salir <spam class=" fa fa-sign-out"></spam></a></li>
      </ul>
    </div><!-- /.navbar-collapsee -->
  </div><!-- /.container-fluid -->
</nav>
<section>
	<!-- InstanceBeginEditable name="section" -->
    <div class="container" id="colorbase">
        <div class="row">
        	<div class="col-md-12 col-sm-12 col-xs-12" id="migas"><a href="../index.html">Inicio</a>\<a href="formularioCitasDePeluqueria.html">Agendar Cita De Peluqueria</a>
            </div>
	<div class="col-md-12 col-sm-12 col-xs-12" id="rol">
		Rol: Cliente
	</div>
        </div>
        
        <div class="container col-md-8 col-md-offset-2" id="containerFormularios">
	  <div class="row" id="rowFormularios">
        <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xs-10 col-xs-offset-1">
	<h:form id="formularioDeSolicitudDeCitasDePeluqueria" onkeypress="if(event.keyCode == 13) { document.getElementById('formularioDeSolicitudDeCitasDePeluqueria:botonAgendarCitaPeluqueria').click(); return false;}">
            <h2>Programe la cita de peluquería para su mascota</h2><hr></hr>
            <div class="form-group" id="fechaD">
                                <label for="fecha" class="lfecha">Fecha de la cita</label>
                                <div class="input-group margin-bottom-sm">
                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                    <input type="text" onfocus="this.blur()" id="fecha" name="fecha" required="true" class="form-control" tabindex="3" 
                                           title="Debe seleccionar una fecha" ></input>
                                    <!--min="2013-01-01T00:00Z" max="2013-12-31T12:00Z"-->
                                </div>
                                
                                <div class="row">
                                    <h:commandButton onclick="ocultar()" class="btn btn-link" id="verificarDisponibilidad" tabindex="7" value="Verificar Disponibilidad" action="#{controladorCitas.verificarDisponibilidadCitaPeluqueria()}" ><i id="verificarDisponibilidad" class="fa fa-chevron-circle-down"></i></h:commandButton>
                                </div> 
                            </div>
                            <script>
                                    $.datetimepicker.setLocale('es');
                                    $('#fecha').datetimepicker({
                                    onGenerate:function(ct){
                                    $(this).find('.xdsoft_date')
                                            .toggleClass('xdsoft_disabled');
                                    },
                                            maxDate:'+1970/01/1',
                                            defaultTime:'00:00',
                                            formatTime: 'H:i',
                                            formatDate: 'Y.m.d',
                                            todayHighlight: true,
                                            //language: 'es',
                                            multidateSeparator: '/',
                                            startView: 0, //si inicia mostrando el dia (0), mes (1), año (2)
                                            //endDate: '+1m', //fecha final habilitada: 1 mes adelante
                                            daysOfWeekDisabled: '7', //deshabilitar días 0-sabado, 1-lunes... etc
                                            showMonthAfterYear: false,
                                            yearStart: 2016,
                                            yearEnd: 2018,
                                            //disabledDates: ['03.04.2016','02.01.2014','03.01.2014','04.01.2014','05.01.2014','06.01.2014'], formatDate:'d.m.Y',

                                            autoclose: true, //autocerrar al perder el foco en el input
                                            // minDate:'1970/01/1' // yesterday is minimum date
                                    });
                                    $('#datetimepicker').datetimepicker({value: '', step: 30});
                                </script>
            <c:if test="#{controladorCitas.estadosP == '10'}">
                            <div class="alert alert-danger">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <strong>El espacio no esta disponible!! </strong> Escoga otra hora o fecha.  
                            </div>
                            </c:if>
            <c:if test="#{controladorCitas.estadosP == '11'}">
                                <script>
                                document.getElementById('fechaD').style.display = "none";
                                </script>
                            <div class="alert alert-success">
                                <button type="button" class="close" data-dismiss="alert">&times;</button>
                                <strong>Espacio Disponible!! </strong> 

                            </div>
                            <p>A continuación llene el formulario para solicitar el servicio de peluquería para su mascota. 
            Los campos con * son obligatorios.
            </p><br></br>
                
    		<div class="form-group">
                                    <input type="text" id="datetimepicker" name="fechaVerdadera" required="true" class="form-control" tabindex="3" 
                                           title="Debe seleccionar una fecha" value="#{controladorCitas.fechaVerdadera.toLocaleString()}" style="display: none;"></input>
                                    <!--min="2013-01-01T00:00Z" max="2013-12-31T12:00Z"-->
                                </div>	
                <div class="form-group">
                                <label for="mascota" class="lmascota">Mascota</label>
                                <div class="input-group margin-bottom-sm">
                                    <span class="input-group-addon"><i class="fa fa-paw"></i></span>
                                    <select id="mascota" name="mascota" class="form-control" required="true" tabindex="2" title="Debe seleccionar una mascota">
                                        <option disabled="true" selected="true">Seleccione su mascota</option>
                                        <c:forEach var="listaMascotas" items="#{controladorUsuario.usuLogin.propietarios.mascotasCollection}"> 
                                            <c:if test="#{listaMascotas.estado == 'Activa'}">
                                                    <option value="#{listaMascotas.codigoMascota}">#{listaMascotas.nombre}</option>
                                                    </c:if>
                                                    <c:if test="#{listaMascotas.estado == 'Inactiva'}">
                                                        <option disabled="true" value="#{listaMascotas.codigoMascota}">#{listaMascotas.nombre}</option>
                                                    </c:if>
                                        </c:forEach>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                        <label for="mascota" class="lmascota">Veterinario</label>
                                        <div class="input-group margin-bottom-sm">
                                        <span class="input-group-addon"><i class="fa fa-user-md"></i></span>
                                        <select id="veterinario" name="veterinario" class="form-control" required="true" tabindex="4" title="Debe seleccionar un veterinario">
                                            <option selected="true" disabled="true">Seleccione su veterinario</option>
                                            <c:forEach var="listaVeterinarios" items="#{controladorCitas.listaCargaVeterinarios}">
                                                <option value="#{listaVeterinarios.cedula}">#{listaVeterinarios.nombres}&nbsp;#{listaVeterinarios.apellidos}</option>
                                            </c:forEach>
                                        </select>
                                        </div>
                                    </div>

                <div class="form-group">
                    <label for="serviciosAplicados">Seleccione el servicio</label>
                                <div class="input-group margin-bottom-sm">
                                    <span class="input-group-addon"><i class="fa fa-calendar-check-o"></i></span>
                                    <select id="serviciosAplicados" name="serviciosAplicados" class="form-control" required="true" tabindex="2" title="Debe seleccionar una mascota">
                                        <option disabled="true" selected="true">Seleccione el servicio</option>
                                        <option >Limpieza de oídos</option>
                                        <option >Cepillado de dientes</option>
                                        <option >Corte de uñas</option>
                                        <option >Baño con shampoo</option>
                                        <option >Corte y pulido</option>
                                        <option >Peinado y perfumado</option>
                                        <option >Decoración</option>
                                        <option >Limpieza de glándulas</option>
                                        <option >Todos</option>
                                    </select>
                                </div>
                </div>            
    			<div id="botonEnviar">
                            <h:commandButton id="botonAgendarCitaPeluqueria" class="btn btn-success pull-right" tabindex="7" value="Agendar Cita" action="#{controladorCitas.agendarCitaPeluqueria()}"></h:commandButton>           
                            </div>
                            </c:if>
	</h:form>
    </div>
         </div>
         </div>
	</div>
</section>
<footer style="min-height: 160px !important;">
            <div id="footer-contenedor" class="row">
                <div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12">
                <div id="panel1Footer" class="col-md-4 col-sm-4 col-xs-12">
                    <h3>UBICACIÓN</h3>
                    <span class=" fa fa-home"></span>&nbsp;&nbsp;Carrera 92 # 147 - 31<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Suba La Campiña<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bogota Colombia
                </div>
                <div id="panel2Footer" class="col-md-4 col-sm-4 col-xs-12">
                    <h3>CONTÁCTENOS</h3>
                    <div class="row">
                        <span class=" fa fa-phone"></span>&nbsp;&nbsp;Teléfono: 6826731
                    </div>
                    <div class="row">
                        <div id="redesSociales">
                            <a href="https://www.facebook.com/clinicaveterinaria.santaisabel" target="_blank"><span class=" fa fa-facebook-square"></span></a>
                            <a href="https://twitter.com/@vetsantaisabel" target="_blank"><span class=" fa fa-twitter-square"></span></a>
                            <a href="https://plus.google.com/107918889656404618563" target="_blank"><span class=" fa fa-google-plus-square"></span></a>
                            <a href="mailto:jsbermudez381@misena.edu.co"><span class=" fa fa-envelope-o"></span></a>
                        </div>
                    </div>
                </div>
                
                <div id="panel1Footer" class="col-md-4  col-sm-4 col-xs-12">
                    <h3>INFORMACIÓN LEGAL</h3>
                        Now Vet | Todos los derechos reservados
                        <br /> &#169; Copyright 2016
                </div>
                </div>
                <br /><br /><br /><br /><br /><br /><br /><br />
            </div>
        </footer>
    </h:body>
</html>

