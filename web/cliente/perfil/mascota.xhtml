<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
        <meta charset="UTF-8"></meta>
        <meta name="viewport" content="width=device-width, user-scalable=no"></meta>
        <meta name="description" content="Gestión de servcios veterinarios"></meta>
        <meta name="keywords" content="Mascota, Veterinario, PetShop, Clínica, Peluquería, Baño"></meta>
        <meta name="author" content="Julian Bermudez, Leonardo Fandiño"></meta>

        <!-- InstanceBeginEditable name="doctitle" -->
        <title>Now Vet | Mascota</title>
        <!-- InstanceEndEditable -->
        <link rel="stylesheet" type="text/css" href="../../css/estilos.css"></link>
        <link rel="icon" href="../../imagenes/favicon.ico" type="image/x-icon"></link>
        <link rel="stylesheet" type="text/css" href="../../css/font-awesome.css"></link>
        <link rel="stylesheet" type="text/css" href="../../css/bootstrap.css"></link>
        <link href="../../css/formValidation.css" rel="stylesheet" type="text/css"/>
        <link href="../../css/bootstrap-table.css" rel="stylesheet" type="text/css"/>
        <script src="../../js/jquery-1.11.3.min.js"></script>
        <script src="../../js/bootstrap.js"></script>
        <script src="../../js/bootstrap-table.js" type="text/javascript"></script>
        <script src="../../js/formValidation.min.js" type="text/javascript"></script>
        <script src="../../js/bootstrapValidator.js" type="text/javascript"></script>
        <script src="../../js/es_ES.js" type="text/javascript"></script>
        <script>
            $().ready(function () {
                $('#modificarMascota').formValidation({
                    err: {container: 'tooltip'},
                    icon: {valid: 'fa fa-check-circle', invalid: 'fa fa-times-circle', validating: 'fa fa-refresh'},
                    locale: 'es_ES',
                    fields: {
                        'modificarMascota:nombre': {
                            row: '.form-group',
                            validators: {
                                notEmpty: {},
                                regexp: {
                                    regexp: '^[A-Za-z ñÑáéíúó]+$',
                                    message: 'Solo letra, sin números o caracteres especiales'
                                },
                                stringLength: {
                                    min: 3,
                                    max: 15
                                }
                            }
                        },
                        'modificarMascota:color': {
                            row: '.form-group',
                            validators: {
                                notEmpty: {},
                                regexp: {
                                    regexp: '^[A-Za-z ñÑáéíúó]+$',
                                    message: 'Solo letras, sin números o caracteres especiales'
                                },
                                stringLength: {
                                    min: 3,
                                    max: 30
                                }
                            }
                        },
                        'modificarMascota:raza': {
                            row: '.form-group',
                            validators: {
                                notEmpty: {},
                                regexp: {
                                    regexp: '^[A-Za-z ñÑáéíúó]+$',
                                    message: 'Solo letras, sin números o caracteres especiales'
                                },
                                stringLength: {
                                    min: 3,
                                    max: 30
                                }
                            }
                        },
                        'modificarMascota:sexo': {
                            row: '.form-group',
                            validators: {
                                notEmpty: {}
                            }
                        },
                        'modificarMascota:estado': {
                            row: '.form-group',
                            validators: {
                                notEmpty: {}
                            }
                        },
                        'modificarMascota:especie': {
                            row: '.form-group',
                            validators: {
                                notEmpty: {}
                            }
                        }

                    }
                });
            });
        </script>
        <script>
            function mostraHis(fecha, vacunas, peso, ante, diag, motivo, alimento, formmedica) {
                $('#detallesHisotorial').modal('show');
                document.getElementById('fecha').innerHTML = fecha;
                document.getElementById('vacunas').innerHTML = vacunas;
                document.getElementById('peso').innerHTML = peso;
                document.getElementById('ante').innerHTML = ante;
                document.getElementById('diag').innerHTML = diag;
                document.getElementById('motivo').innerHTML = motivo;
                document.getElementById('alimento').innerHTML = alimento;
                document.getElementById('formMedica').innerHTML = formmedica;
            }
        </script>
        <f:event listener="#{controladorUsuario.miraSession('cliente')}" type="preRenderView"></f:event>
    </h:head>
    <h:body>
        <img id="back" src="../../imagenes/fondo.jpg" height="751px" width="765px"></img>
        <h:form>
            <nav class="navbar navbar-default navbar-fixed-top">
                <div class="container-fluid">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="../indexCliente.xhtml">
                            <img alt="Brand" src="../../imagenes/logo.png" width="132px" height="90px" />
                        </a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="../indexCliente.xhtml">Inicio</a></li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Servicios <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                    <li><a href="../servicios/formularioCitasClinicas.xhtml">Agendar Cita Clínica</a></li>
                                    <li><a href="../servicios/formularioCitasDePeluqueria.xhtml">Agendar Cita De Peluquería</a></li>
                                </ul>
                            </li>
                            <li><a href="../citas/misCitas.xhtml">Citas</a></li>
                            <li><a href="../perfil/miperfil.xhtml">Mi Perfil</a></li>
                            <li><h:commandLink action="#{controladorUsuario.cerrarSesion()}">Salir&nbsp;<span class=" fa fa-sign-out"></span></h:commandLink></li>
                        </ul>
                    </div><!-- /.navbar-collapsee -->
                </div><!-- /.container-fluid -->
            </nav>
        </h:form>
        <c:if test="#{controladorMascotas.estado eq '1'}">
            <div class="alert alert-success alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>¡Alerta!</strong> Mascota modifica con exito
            </div>
        </c:if>
        <section>
            <!-- InstanceBeginEditable name="section" -->
            <div class="container" id="colorbase">
                <div class="row">
                    <div class="col-md-12 col-sm-12 col-xs-12" id="migas">
                        <h:link value="Inicio" outcome="/cliente/indexCliente" />\
                        <h:link value="Mi Perfil" outcome="/cliente/perfil/miperfil" />\<h:link value="Mascota" outcome="/cliente/perfil/mascota" />
                    </div>
                    <div class="col-md-12 col-sm-12 col-xs-12" id="rol">
                        Rol: Cliente
                    </div>
                    <div class="col-md-1 col-sm-2 col-xs-3" style="padding-top:20px;">
                        <img src="../../imagenes/perfilMascota.png" alt="mascota" class="img-circle img-responsive"></img>
                    </div>
                    <div class="col-md-11 col-sm-9 col-xs-9">
                        <h3><h:outputText value="#{controladorMascotas.mascotaTemp.nombre}" /></h3>
                        <h5>Especie:&nbsp;<h:outputText value="#{controladorMascotas.mascotaTemp.especie}"/></h5>
                    </div>
                </div>
                <div class="row">
                    <div id="subtitulo" class="col-md-12 col-sm-12 col-xs-12">
                        <h3>Datos</h3>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-10" id="datosPersonales">
                        <h4>Raza:&nbsp;<h:outputText value="#{controladorMascotas.mascotaTemp.raza}"/></h4>
                        <h4>Color:&nbsp;<h:outputText value="#{controladorMascotas.mascotaTemp.color}"/></h4>
                        <h4>Sexo:&nbsp;<h:outputText value="#{controladorMascotas.mascotaTemp.sexo}"/></h4>
                        <h4>Estado:&nbsp;<h:outputText value="#{controladorMascotas.mascotaTemp.estado}"/></h4>

                    </div>
                    <div class="col-md-2" id="editarDatosPersonales">
                        <button type="button" class="btn btn-success" style="margin-top: 10px;" data-toggle="modal" data-target="#modalModificar"><i class="fa fa-pencil"></i>&nbsp;Editar</button>
                        <!-- Modal -->
                        <div class="modal fade" id="modalModificar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title" id="myModalLabel">Modificar Mascota</h4>
                                    </div>
                                    <h:form id="modificarMascota">
                                        <div class="modal-body">
                                            <div class="form-group">
                                                <h:outputLabel for="nombre" value="Nombre"></h:outputLabel>
                                                <h:inputText class="form-control" id="nombre" value="#{controladorMascotas.mascotaTemp.nombre}"></h:inputText>
                                            </div>
                                            <div class="form-group">
                                                <h:outputLabel for="raza" value="Raza"></h:outputLabel>
                                                <h:inputText class="form-control" id="raza" value="#{controladorMascotas.mascotaTemp.raza}"></h:inputText>
                                            </div>
                                            <div class="form-group">
                                                <h:outputLabel for="especie" value="Especie"></h:outputLabel>
                                                <h:selectOneMenu id="especie" class="form-control" value="#{controladorMascotas.mascotaTemp.especie}">
                                                    <f:selectItem itemValue="Perro" itemLabel="Perro"></f:selectItem>
                                                    <f:selectItem itemValue="Gato" itemLabel="Gato"></f:selectItem>
                                                </h:selectOneMenu>
                                            </div>
                                            <div class="form-group">
                                                <h:outputLabel for="sexo" value="Sexo"></h:outputLabel>
                                                <h:selectOneMenu id="sexo" class="form-control" value="#{controladorMascotas.mascotaTemp.sexo}">
                                                    <f:selectItem itemValue="Macho" itemLabel="Macho"></f:selectItem>
                                                    <f:selectItem itemValue="Hembra" itemLabel="Hembra"></f:selectItem>
                                                </h:selectOneMenu>
                                            </div>
                                            <div class="form-group">
                                                <h:outputLabel for="color" value="Color"></h:outputLabel>
                                                <h:inputText class="form-control" id="color" value="#{controladorMascotas.mascotaTemp.color}"></h:inputText>
                                            </div>
                                            <div class="form-group">
                                                <h:outputLabel for="estado" value="Estado"></h:outputLabel>
                                                <h:selectOneMenu id="estado" class="form-control" value="#{controladorMascotas.mascotaTemp.estado}">
                                                    <f:selectItem itemValue="Activa" itemLabel="Activa"></f:selectItem>
                                                    <f:selectItem itemValue="Inactiva" itemLabel="Inactiva"></f:selectItem>
                                                </h:selectOneMenu>
                                            </div>



                                        </div>
                                        <div class="modal-footer">
                                            <h:commandButton action="#{controladorMascotas.modificarMascota()}" class="btn btn-success" value="Modificar"></h:commandButton>
                                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>

                                        </div>
                                    </h:form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" style="border-bottom: 2px solid #CFD8DC;">
                    <button type="button" id="mostrarhistorial" onClick="mostrar()" style="display:block;" class="btn btn-link"><i class="fa fa-chevron-circle-down"></i> Ver Historial</button>
                </div>
                <div class="row" style="border-bottom: 2px solid #CFD8DC; padding-bottom: 10px;">
                    <button type="button" id="ocultarhistorial" onClick="ocultar()" style="display:none;" class="btn btn-link"><i class="fa fa-chevron-circle-up"></i> Ocultar Historial</button>
                </div>
                <div id="historial" style="display:none;" class="row">
                    <div class="col-md-12" id="datosPersonales">
                        <div class="row" id="exportar">
                            <h4>Exportar:</h4>
                        </div>
                        <br></br>
                        <table
                            data-toggle="table"
                            data-url="../json/data1.json" 
                            data-show-columns="true"
                            data-minimum-count-columns="2"
                            data-id-field="id"
                            data-search="true"
                            data-show-refresh="true" 
                            data-show-toggle="true"
                            data-sort-name="fecha"
                            data-sort-order="asc"
                            data-pagination="true"
                            data-page-size="10"
                            data-page-list="[10,25,40,50,100,1000]">
                            <thead>
                                <tr>
                                    <th data-field="fecha" data-sortable="true">Fecha</th>
                                    <th data-field="vacunas" data-sortable="true">Vacunas</th>
                                    <th data-field="peso" data-sortable="true">peso</th>
                                    <th data-field="alimento" data-sortable="true">alimento</th>
                                    <th>Mas Detalles</th>
                                </tr>
                            </thead>
                            <tbody>
                                <c:forEach var="listaHistorial" items="#{controladorMascotas.listarHistorialClinico()}">
                                    <tr>
                                        <td>#{listaHistorial.citas.fechaAsignada.toLocaleString()}</td> 
                                        <td>#{listaHistorial.citas.vacunas}</td> 
                                        <td>#{listaHistorial.citas.peso}</td> 
                                        <td>#{listaHistorial.alimento}</td> 
                                        <td><button type="button" onclick="mostraHis('#{listaHistorial.citas.fechaAsignada.toLocaleString()}',
                                                                '#{listaHistorial.citas.vacunas}',
                                                                '#{listaHistorial.citas.peso}',
                                                                '#{listaHistorial.citas.antecedentes}',
                                                                '#{listaHistorial.diagnostico}',
                                                                '#{listaHistorial.motivo}',
                                                                '#{listaHistorial.alimento}',
                                                                '#{listaHistorial.formulaMedica}')" class="btn btn-default"><i class="fa fa-eye"></i></button></td> 
                                    </tr>
                                </c:forEach>
                            </tbody>
                        </table>

                        <div class="modal fade" id="detallesHisotorial" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title" id="myModalLabel">Detalles</h4>
                                    </div>
                                    <div class="modal-body">
                                        <strong>Fecha: </strong><small id="fecha"></small><br></br>
                                        <strong>Vacunas: </strong><small id="vacunas"></small><br></br>
                                        <strong>Peso: </strong><small id="peso"></small><br></br>
                                        <strong>Antecedentes: </strong><p id="ante"></p>
                                        <strong>Diagnostico: </strong><p id="diag"></p>
                                        <strong>Motivo: </strong><p id="motivo"></p>
                                        <strong>Alimento: </strong><small id="alimento"></small><br></br>
                                        <strong>Formula Medica: </strong><p id="formMedica"></p>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    function mostrar() {
                        document.getElementById('mostrarhistorial');
                        document.getElementById('mostrarhistorial').style.display = "none";
                        document.getElementById('ocultarhistorial').style.display = "block";
                        document.getElementById('historial').style.display = "block";

                    }
                </script>
                <script>
                    function ocultar() {
                        document.getElementById('ocultarhistorial');
                        document.getElementById('mostrarhistorial').style.display = "block";
                        document.getElementById('ocultarhistorial').style.display = "none";
                        document.getElementById('historial').style.display = "none";
                    }
                </script>
            </div>
            <!-- InstanceEndEditable -->
        </section>
        <footer style="min-height: 160px !important;">
            <div id="footer-contenedor" class="row">
                <div class="col-md-8 col-md-offset-2 col-sm-10 col-sm-offset-1 col-xs-12">
                    <div id="panel1Footer" class="col-md-4 col-sm-4 col-xs-12">
                        <h3>UBICACIÓN</h3>
                        <span class=" fa fa-home"></span>&nbsp;&nbsp;Carrera 92 # 147 - 31<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Suba La Campiña<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Bogota Colombia
                    </div>
                    <div id="panel2Footer" class="col-md-4 col-sm-4 col-xs-12">
                        <h3>CONTÁCTENOS</h3>
                        <div class="row">
                            <span class=" fa fa-phone"></span>&nbsp;&nbsp;Teléfono: 6826731
                        </div>
                        <div class="row">
                            <div id="redesSociales">
                                <a href="https://www.facebook.com/clinicaveterinaria.santaisabel" target="_blank"><span class=" fa fa-facebook-square"></span></a>
                                <a href="https://twitter.com/@vetsantaisabel" target="_blank"><span class=" fa fa-twitter-square"></span></a>
                                <a href="https://plus.google.com/107918889656404618563" target="_blank"><span class=" fa fa-google-plus-square"></span></a>
                                <a href="mailto:jsbermudez381@misena.edu.co"><span class=" fa fa-envelope-o"></span></a>
                            </div>
                        </div>
                    </div>

                    <div id="panel1Footer" class="col-md-4  col-sm-4 col-xs-12">
                        <h3>INFORMACIÓN LEGAL</h3>
                        Now Vet | Todos los derechos reservados
                        <br /> &#169; Copyright 2016
                    </div>
                </div>
                <br /><br /><br /><br /><br /><br /><br /><br />
            </div>
        </footer>
    </h:body>
</html>

